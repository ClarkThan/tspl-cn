# 3.1 句法扩展（宏）

就象我们在[2.5节](../chapter02/2-5.md)看到的一样，`let`句法形式本质上是通过`lambda`表达式及过程应用定义出来的一个句法扩展，`lambda` 表达式以及过程应用两者都属于核心语法形式。在这一点上，你可能想知道哪些句法形式是核心语法，哪些是宏，以及怎样定义新的宏。本节提供这些问题的一些答案。

事实上，我们没有必要明显地区分核心语法与宏，因为宏一旦定义，就具有了与核心语法相同的地位。然而这里对它们进行区分，是为了更容易理解语言本身，因为它允许我们将注意力集中在核心语法上，并以此为基础进一步理解其它的方面。


一个 Scheme 实现需要区分核心形式和宏。作为编译或解释执行的第一步，Scheme 实现首先将宏展开成为核心语法形式，接下来只需要关注核心语法形式的解释或编译。语言标准并未定义哪一个语法形式应该实现为核心语法，那一个语法形式应该实现为宏，所以，这里讨论的核心语法是与实现相关的，在不同的实现中可能会与这里描述的不一样。（译注：这一段并未尊重原著，我觉得用宏来代替句法扩展并无不妥，还更好理解）

语言的核心语法里具体应该包含哪些东西是有争议的，应该足以通过核心语法扩展出其它所有的语法形式。这里讨论的集合是满足这一约束条件的最简单的集合。（也就是说，一整个完整的语言都可以通过这里描述的这个小子集实现出来）


核心语法里包括顶级定义`define`，常量，变量，过程应用（函数调用），`quote`表达式，`lambda`表达式，`if`表达式, 以及`set!`表达式。下面的语法表描述了这些定义和表达式。在语法表里，竖线(|)表示单选，一个语法形式后面跟着星号(*)表示该形式的零个或多个。<variable>可以是任何 Scheme 标识符。<datum>可以是任何 Scheme 对象，例如一个数字，一个列表，一个符号或者一个向量。<boolean> 是 #t 或 #f 之一，<number> 可以是任何数字，<character>可以是任意字符，<string> 可以是任意字符串。我们已经见过数字，字符串，列表，符号以及布尔值的例子了。有关这些对象和其他对象的对象级语法的更多信息，请参阅[第六章](../chapter06/README.md)或[语法描述]()。

```
<program>               -->	<form>*
<form>                  -->	<definition> | <expression>
<definition>            -->	<variable definition> | (begin <definition>*)  
<variable definition>   -->	(define <variable> <expression>)
<expression>	        -->	<constant>
                         |	<variable>  
                         |	(quote <datum>)  
                         |	(lambda <formals> <expression> <expression>*)  
                         |	(if <expression> <expression> <expression>)  
                         |	(set! <variable> <expression>)  
                         |	<application>  
<constant>              -->	<boolean> | <number> | <character> | <string>  
<formals>               -->	<variable>
                         |	(<variable>*)  
                         |	(<variable> <variable>* . <variable>)  
<application>           -->	(<expression> <expression>*)
```


